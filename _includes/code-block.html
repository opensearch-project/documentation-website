{% assign languages = site.data.code_languages.languages %}
<div class="code-tabs">
  <div class="tab-nav">
    {% for lang in languages %}
      {% assign lang_content = include[lang.id] %}
      {% if lang_content != nil %}
        <button class="tab-button{% if forloop.first %} active{% endif %}" 
                data-tab="{{ lang.id }}">{{ lang.name }}</button>
      {% endif %}
    {% endfor %}
  </div>

  {% if include.description %}
  <div class="code-description">
    {{ include.description }}
  </div>
  {% endif %}

  {% for lang in languages %}
    {% assign lang_content = include[lang.id] %}
    {% if lang_content != nil %}
      <div id="{{ lang.id }}" class="tab{% if forloop.first %} active{% endif %}">
        <div class="code-container">
          {% case lang.id %}
          {% when 'rest' %}
            {% highlight json %}
{{ lang_content | strip }}
            {% endhighlight %}
          {% when 'python' %}
            {% highlight python %}
{{ lang_content | strip }}
            {% endhighlight %}
          {% when 'java' %}
            {% highlight java %}
{{ lang_content | strip }}
            {% endhighlight %}
          {% else %}
            {% highlight text %}
{{ lang_content | strip }}
            {% endhighlight %}
          {% endcase %}
          <div class="button-container">
            {% for button in lang.buttons %}
              {% if button == 'copy' %}
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
              {% elsif button == 'curl' %}
                <button class="copy-button" onclick="copyAsCurl(this)">Copy as cURL</button>
              {% endif %}         
            {% endfor %}
          </div>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>
