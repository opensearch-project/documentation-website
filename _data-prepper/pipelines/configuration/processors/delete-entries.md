---
layout: default
title: Delete entries
parent: Processors
grand_parent: Pipelines
nav_order: 110
---
 
# Delete entries processor

The `delete_entries` processor removes entries, such as key-value pairs, from an event. Use the `with_keys` field to specify
the exact keys to delete. To delete keys that match a regular expression pattern, use the `with_keys_regex` field. You can
prevent deletion of specific events when using regular expressions by configuring the `exclude_from_regex` field.

To use both `with_keys` and `with_keys_regex` in the same configuration, define them in the `entries` field.

## Configuration

You can configure the `delete_entries` processor with the following options.

<!--
This table is autogenerated. Do not edit it.
- name: delete_entries
- pluginType: processor
- source: https://github.com/opensearch-project/data-prepper/blob/c4455a7785bc2da4358067c217be7085e0bc8d0f/data-prepper-plugins/mutate-event-processors/src/main/java/org/opensearch/dataprepper/plugins/processor/mutateevent/DeleteEntryProcessorConfig.java
-->

| Option | Required | Description                                                                                                                                                                                     |
:--- |:---------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| `with_keys` | No       | An array that specifies the keys of the entries to delete.                                                                                                                                      |
| `with_keys_regex` | No       | An array of regular expression (regex) patterns used to match the keys of the entries to delete.                                                                                                    |
| `exclude_from_delete` | No | A set of entries to exclude from deletion when using the `with_keys_regex` configuration.                                                                                                       |
| `entries` | No | A list of entries to delete from the event.                                                                                                                                                     |
| `delete_when` | No | Specifies under what conditions the deletion should be performed. (Example: `value= "some_key == null"` -- Deletion runs only if `some_key` is `null` or does not exist.)                |
|`delete_from_element_when` | No | Specifies the condition for deleting the key from each element of a list when using `iterate_on`.                                                                                             |
| `iterate_on` | No | A string specifying the key of the list of objects to iterate over. The keys listed in `with_keys` will be deleted from each object.                                                                             

## Usage

To get started, create the following `pipeline.yaml` file:

```yaml
pipeline:
  source:
    ...
  ....
  processor:
    - delete_entries:
        entries:
          - with_keys: [ "message" ]
          - with_keys_regex: [ "^tes.*" ]
            exclude_from_delete: [ "test" ]
  sink:
```
{% include copy.html %}

Next, create a log file named `logs_json.log` and replace the `path` in the file source of your `pipeline.yaml` file with that filepath. For more information, see [Configuring OpenSearch Data Prepper]({{site.url}}{{site.baseurl}}/data-prepper/getting-started/#2-configuring-data-prepper).

For example, before you run the `delete_entries` processor, if the `logs_json.log` file contains the following event record:

```json
{"message": "hello", "message2": "goodbye", "test": "friends", "test2": "are", "test3": "kind"}
```

When you run the `delete_entries` processor, it parses the message into the following output:

```json
{"message2": "goodbye","test": "friends"}
```

> If the `with_keys`, `with_keys_regex`, or `exclude_from_delete` values do not match any event keys, then no action occurs.
