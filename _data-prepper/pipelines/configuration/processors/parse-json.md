---
layout: default
title: parse_json 
parent: Processors
grand_parent: Pipelines
nav_order: 80
---

# parse_json

The `parse_json` processor parses JSON-formatted strings within an event, including nested fields. It can optionally use a JSON pointer to extract a specific part of the source JSON and add the extracted data to the event.

## Configuration

You can configure the `parse_json` processor with the following options.

<!--
This table is autogenerated. Do not edit it.
- name: parse_json
- pluginType: processor
- source: https://github.com/opensearch-project/data-prepper/blob/253e59245fd9c39c959c1c8caaeff1b226a5a0ab/data-prepper-plugins/parse-json-processor/src/main/java/org/opensearch/dataprepper/plugins/processor/parse/json/ParseJsonProcessorConfig.java
-->

| Option | Required | Type | Description |
| :--- | :--- | :--- | :--- | 
| `source` | No | String | The field in the event that will be parsed. Default is `message`. |
| `destination` | No | String | The destination field for the parsed JSON.  Default is the root of the event. Cannot be `""`, `/`, or any white-space-only string. |
| `pointer` | No | String | A JSON pointer (as defined by [RFC 6901](https://datatracker.ietf.org/doc/html/rfc6901)) to a specific field in the source JSON. If omitted, the entire `source` is parsed. If the pointer is invalid, the full `source` is parsed instead. When writing to the root destination, existing keys will be preserved unless overwritten. |
| `parse_when` | No | String | A condition expression that determines when to parse the field. Accepts a string following the [expression syntax]({{site.url}}{{site.baseurl}}/data-prepper/pipelines/expression-syntax/). |
| `overwrite_if_destination_exists` | No | Boolean | Whether to overwrite the destination field if it already exists. Default is `true`. |
| `delete_source` | No | Boolean | Whether to delete the source field after parsing. Default is `false`. |
| `tags_on_failure` | No | String | A list of tags to apply if parsing fails or an unexpected exception occurs. |

## Usage

To use the `parse_json` processor, add it to your `pipeline.yaml` configuration file:

```yaml
parse-json-pipeline:
  source:
    ...
  ...
  processor:
    - parse_json:
```
{% include copy.html %}

All examples use the following JSON message for the event output:

```json
{"outer_key": {"inner_key": "inner_value"}}
```
{% include copy.html %}

### Basic example

The following example parses a JSON message field and flattens the data into the event. The original `message` from the example event remains, and the parsed content is added at the root level, as shown in the following output: 

```json
{
  "message": "{\"outer_key\": {\"inner_key\": \"inner_value\"}}",
  "outer_key": {
    "inner_key": "inner_value"
  }
}
```

### Delete a source

If you want to remove the original field from the originating JSON message, use the `delete_source` option, as shown in the following example pipeline:

```yaml
parse-json-pipeline:
  source:
    ...
  ...
  processor:
    - parse_json:
        delete_source: true
```
{% include copy.html %}

In the following event, the `message` field is parsed and removed, leaving only the structured output:

```json
{
  "outer_key": {
    "inner_key": "inner_value"
  }
}
```


### Example using a JSON pointer

You can use the `pointer` option to extract a specific nested field from the JSON data, as shown in the following example pipeline:

```yaml
parse-json-pipeline:
  source:
    ...
  ...
  processor:
    - parse_json:
        pointer: "/outer_key/inner_key"
```
{% include copy.html %}

Only the value at the pointer path `/outer_key/inner_key` is extracted and added to the event. If you set `destination`, the extracted value will be added to that field instead:

```json
{
  "message": "{\"outer_key\": {\"inner_key\": \"inner_value\"}}",
  "inner_key": "inner_value"
}
```
